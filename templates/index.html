{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2>{{ tieu_de }} th√°ng : {{ thang_hien_tai }}</h2>
    <hr>
    {% if kieu == 'chi_tiet' %}
        {% if data %}
            {% for gd in data %}
                <p>{{ gd.ngay }} | {{ gd.loai_giao_dich }} | {{ gd.so_tien }} | {{ gd.ghi_chu or '' }}</p>
            {% endfor %}
        {% else %}
            <p>Kh√¥ng c√≥ d·ªØ li·ªáu giao d·ªãch.</p>
        {% endif %}
    
    {% elif kieu == 'tong_hop' %}
        {% if data %}
            <table border="1" cellpadding="8" cellspacing="0">
                <tr>
                    <th>Th√°ng</th>
                    <th>Ngu·ªìn ti·ªÅn</th>
                    <th>ƒê·∫ßu k·ª≥</th>
                    <th>Thu</th>
                    <th>Chi</th>
                    <th>Chuy·ªÉn ƒë·ªïi</th>
                    <th>Cu·ªëi k·ª≥</th>
                </tr>
                {% for row in data %}
                <tr>
                    <td>{{ row.thang }}</td>
                    <td>{{ row.ten_nguon }}</td>
                    <td>{{ row.dau_ky }}</td>
                    <td>{{ row.thu }}</td>
                    <td>{{ row.chi }}</td>
                    <td>{{ row.chuyen_doi }}</td>
                    <td>{{ row.cuoi_ky }}</td>
                </tr>
                {% endfor %}
            </table>
        {% endif %}
    {% else %}
        <div class="container">
            <!-- T·ªïng h·ª£p t·ª∑ l·ªá ngu·ªìn ti·ªÅn -->
            <h3> {{ tieu_de_data1 }}</h3>
            {% if data1 %}
                <table border="1" cellpadding="4" cellspacing="0" class ="table_phan_tram_nguon_tien">
                    <tr>
                        <th>Ngu·ªìn ti·ªÅn</th>
                        <th>S·ªë ti·ªÅn</th>
                        <th>T·ª∑ l·ªá</th>
                    </tr>
                    {% for row in data1 %}
                    <tr>
                        <td>{{ row.ten_nguon }}</td>
                        <td style="text-align: right;">{{ "{:,.0f}".format(row.tong_so_tien) }}</td>
                        <td style = "color: #f2ff9c; text-align: right;">{{ row.phan_tram }}</td>
                    </tr>
                    {% endfor %}
                </table>
            {% else %}
                <p>Kh√¥ng c√≥ d·ªØ li·ªáu giao d·ªãch.</p>
            {% endif %}
            <hr>
            <!-- T√≠ch l≈©y  -->
            <h3>{{ tieu_de_data2 }}</h3>
            {% if data2 %}
                {% for row in data2 %}
                <div class = "giao-dich">
                    Thu : <span class = "so-tien" style = "color: #00ff00;">{{ "{:,.0f}".format(row.thu) }}</span><br>
                    Chi : <span class = "so-tien" style = "color : #ff3333;">{{ "{:,.0f}".format(row.chi) }}</span><br>
                    T√≠ch L≈©y : <span class ="so-tien" style = "color : #5148fc;">{{ "{:,.0f}".format(row.tich_luy) }}</span><br>
                    ƒê·∫°t ƒë∆∞·ª£c : <span class ="so-tien" style = "color: #ffffff;">{{ row.phan_tram_tich_luy }}</span>
                </div>
                {% endfor %}
            {% else %}
                <p>Kh√¥ng c√≥ d·ªØ li·ªáu giao d·ªãch.</p>
            {% endif %}
            <hr>
            <!-- 5 giao d·ªãch g·∫ßn nh·∫•t -->
            <h3>{{ tieu_de_data }}</h3> 
            {% if data %}
            {% for gd in data[:5] %}
                <div class="giao-dich {{ gd.loai_giao_dich|slugify }}">
                    <span class="id">üÜî {{ gd.id }}</span> üìÖ
                    <span class="ngay">{{ gd.ngay }}</span> 
                        {% if gd.loai_giao_dich=='Thu' %} 
                            <span class ="thu"> {{ gd.loai_giao_dich }}
                        {% elif gd.loai_giao_dich=='Chi' %}
                            <span class ="chi"> {{ gd.loai_giao_dich }}
                        {% else %}
                            <span class ="chuyendoi"> {{ gd.loai_giao_dich }}
                        {% endif %}
                    </span> : {{ gd.nguon_tien_obj.ten_nguon }} ‚û°Ô∏è {{ gd.noi_den_obj.ten_nguon }}
                    <!-- <span class="ghichu">{{ gd.ghi_chu or 'Kh√¥ng ghi ch√∫' }}</span> -->
                    <span class="so-tien">{{ "{:,.0f}".format(gd.so_tien) }}‚Ç´</span>
                </div>
            {% endfor %}
            {% else %}
            <p>Kh√¥ng c√≥ d·ªØ li·ªáu giao d·ªãch.</p>
            {% endif %}

        </div>

        <div>
            
        </div>
    {% endif %}
</div>

<div class="toolbar">
    <form action="{{ url_for('index') }}" method="get" style="display:inline;">
        <input type="hidden" name="loai" value="tblthuchi">
        <button type="submit" title="Hi·ªÉn th·ªã giao d·ªãch chi ti·∫øt">üìä</button>
    </form>

    <form action="{{ url_for('index') }}" method="get" style="display:inline;">
        <input type="hidden" name="loai" value="tonghop">
        <button type="submit" title="Hi·ªÉn th·ªã t·ªïng h·ª£p giao d·ªãch">üîé</button>
    </form>

    <button title="Hi·ªÉn th·ªã d·ªØ li·ªáu 3"></button> <!-- Icon t√†i li·ªáu -->
    <button title="C√†i ƒë·∫∑t">‚öô</button> <!-- Icon c√†i ƒë·∫∑t -->
</div>

{% endblock %}